<% file_types = Alchemy.config.uploader.allowed_filetypes[object.class.model_name.collection] || ['*'] %>
<% accept ||= file_types.to_a == ["*"] ? nil : file_types.map {|type| ".#{type}"}.join(", ") %>

<alchemy-uploader redirect-url="<%= redirect_url %>">
  <%= form_for [:admin, object], html: {multipart: true, class: 'upload-button'} do |f| %>
    <%= f.file_field file_attribute,
      class: 'fileupload--field', accept: accept,
      name: "#{f.object_name}[#{file_attribute}]",
      id: "replace_#{dom_id(object)}" %>
    <%= label_tag "replace_#{dom_id(object)}", class: "icon_button" do %>
      <%= render_icon "file-upload" %>
    <% end %>
  <% end %>
</alchemy-uploader>
