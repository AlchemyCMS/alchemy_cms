<% content = local_assigns[:content] || local_assigns[:essence_text_view] %>
<%- options = local_assigns.fetch(:options, {}) -%>
<%- html_options = local_assigns.fetch(:html_options, {}) -%>
<%- if content.essence.link.blank? ||
    content.settings_value(:disable_link, options) -%>
<%= content.ingredient -%>
<%- else -%>
<%= link_to(
  content.ingredient,
  url_for(content.essence.link),
  {
    title: content.essence.link_title,
    target: (content.essence.link_target == "blank" ? "_blank" : nil),
    'data-link-target' => content.essence.link_target
  }.merge(html_options)
) -%>
<%- end -%>